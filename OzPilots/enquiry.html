<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <!-- Copyright 2005 Macromedia, Inc. All rights reserved. -->
  <title>Escort Pilots Western Australia</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="mm_travel2.css" type="text/css" />
  <script language="JavaScript" type="text/javascript">
    //--------------- LOCALIZEABLE GLOBALS ---------------
    var d = new Date();
    var monthname = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
    //Ensure correct for language. English is "January 1, 2004"
    var TODAY = monthname[d.getMonth()] + " " + d.getDate() + ", " + d.getFullYear();
    //---------------   END LOCALIZEABLE   ---------------
  </script>
  <style type="text/css">
    <!--
    .style1 {
      font-size: 16px
    }
    -->
  </style>
</head>

<body bgcolor="#C0DFFD">
  <table width="71%" border="0" cellspacing="0" cellpadding="0">
    <tr bgcolor="#3366CC">
      <td colspan="3" rowspan="2"><img src="IMG_0028.jpg" width="655" height="208" /></td>
      <td height="63" colspan="3" id="logo" valign="bottom" align="center" nowrap="nowrap">
        <div align="left">
          <p align="center">Escort Pilots Australia</p>
        </div>
      </td>
      <td width="4">&nbsp;</td>
    </tr>

    <tr bgcolor="#3366CC">
      <td height="64" colspan="3" id="tagline" valign="top" align="center">
        <div align="center">Emails for Pilots</div>
      </td>
      <td width="4">&nbsp;</td>
    </tr>

    <tr>
      <td colspan="7" bgcolor="#003366"><img src="mm_spacer.gif" alt="" width="1" height="1" border="0" /></td>
    </tr>

    <tr bgcolor="#CCFF99">
      <td colspan="7" id="dateformat" height="25">&nbsp;&nbsp;
        <script language="JavaScript" type="text/javascript">
          document.write(TODAY);	</script>
        <center>
          www.ozpilots.com.au is a part of WASP Multi Services
        </center>
      </td>
    </tr>
    <tr>
      <td colspan="7" bgcolor="#003366"><img src="mm_spacer.gif" alt="" width="1" height="1" border="0" /></td>
    </tr>

    <tr>
      <td width="165" valign="top" bgcolor="#E6F3FF">
        <table border="0" cellspacing="0" cellpadding="0" width="165" id="navigation">
          <tr>
            <td width="165">&nbsp;<br />
              &nbsp;<br /></td>
          </tr>
          <tr>
            <td width="165"><a href="index.html" class="navText">Back Home</a></td>
          </tr>
          <tr>
            <td width="165"><a href="prices.html" class="navText">Prices</a></td>
          </tr>
          <tr>
            <td width="165"><a href="javascript:;" class="navText">Information</a></td>
          </tr>
          <tr>
            <td width="165"><a href="links.html" class="navText">Links</a></td>
          </tr>
          <tr>
            <td width="165"><a href="javascript:;" class="navText">For Sale</a></td>
          </tr>
          <tr>
            <td width="165"><a href="wa.html" class="navText">Western Australia Pilots</a></td>
          </tr>
          <tr>
            <td width="165"><a href="javascript:;" class="navText">South Australia Pilots</a></td>
          </tr>
          <tr>
            <td width="165"><a href="javascript:;" class="navText">Queensland Pilots</a></td>
          </tr>
          <tr>
            <td width="165"><a href="javascript:;" class="navText">Victoria Pilots</a></td>
          </tr>
          <tr>
            <td width="165"><a href="javascript:;" class="navText">Northern Territory Pilots</a></td>
          </tr>
          <tr>
            <td width="165"><a href="javascript:;" class="navText">New South Wales Pilots</a></td>
          </tr>
          <tr>
            <td width="165"><a href="javascript:;" class="navText">Tasmania Pilots</a></td>
          </tr>
          <tr>
            <td width="165"><a href="javascript:;" class="navText">Australian Capital Territory Pilots</a></td>
          </tr>
          <tr>
            <td width="165"><a href="mailto:sales@ozpilots.com.au" class="navText">Contact</a></td>
          </tr>
        </table>
         <br />
        &nbsp;<br />
        &nbsp;<br />
        &nbsp;<br />
      </td>
      <td width="50"><img src="mm_spacer.gif" alt="" width="50" height="1" border="0" /></td>
      <td colspan="2" valign="top"><img src="mm_spacer.gif" alt="" width="305" height="1" border="0" /><br />
        &nbsp;<br />
        &nbsp;<br />
        <table width="1006" height="325" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td class="pageName style1">Services Enquiry</td>
          </tr>
          <tr>
            <td class="bodyText">
              <table width="970" height="189" border="0" cellpadding="0" cellspacing="0">
              </table>
              <form id="email-form" name="email-form" data-name="Email Form">
                <table width="300" border="0" align="left" cellpadding="2" cellspacing="0">
                  <tr >
                    <td><b>First Name</b></td>
                    <td><input type="text" style="width: 200px" class="text-field w-input" maxlength="256" name="FirstName"
                        placeholder="Enter your first name" id="FirstName" required="">
                    </td>
                  </tr>
                  <tr>
                    <td><b>Last Name</b></td>
                    <td><input type="text" style="width: 200px" class="text-field w-input" maxlength="256" name="LastName"
                        placeholder="Enter your last name" id="LastName" required="">
                    </td>
                  </tr>
                  <tr>
                    <td><b>Phone Number</b></td>
                    <td><input type="text" style="width: 200px" class="text-field w-input" maxlength="256" name="CellPhone"
                        data-name="phoneNumber" placeholder="Enter your phone number" id="CellPhone" required="">
                    </td>
                  </tr>
                  <tr>
                    <td><b>Email</b></td>
                    <td><input type="email" style="width: 200px" class="text-field w-input" maxlength="256" name="Email"
                        placeholder="Enter your email" id="Email" required="">
                    </td>
                  </tr>
                  <tr>
                    <td><b>location</b></td>
                    <td>
                      <input type="text" style="width: 200px" class="text-field w-input" maxlength="256" name="LOCATION"
                        placeholder="Enter your address" id="searchTextField" onfocusout="fetchAddress()" required="">
                      <input type="hidden" class="text-field w-input" maxlength="256" name="Latitude"
                        placeholder="Enter your address" id="Latitude">
                      <input type="hidden" class="text-field w-input" maxlength="256" name="Longitude"
                        placeholder="Enter your address" id="Longitude">
                    </td>
                  </tr>
                  <tr>
                    <td><b>Postcode</b></td>
                    <td><input type="number" style="width: 200px" class="text-field w-input" maxlength="256" name="PostCode"
                        placeholder="Enter your post code" id="PostCode" required="">
                    </td>
                  </tr>
                  <tr>
                    <td><input type="submit"  value="Send message" data-wait="Please wait..." class="button2 w-button">
                    </td>
                  </tr>
                </table>
              </form>

              <p>&nbsp;</p>
              <p>&nbsp;</p>
              <p>
                <center>Members can login by using your email address and password provided by this website.</center>
              </p>
              <p>&nbsp;</p>
            </td>
          </tr>
        </table>
         <br />
      </td>
      <td width="50"><img src="mm_spacer.gif" alt="" width="50" height="1" border="0" /></td>
      <td width="4" valign="top"><br />
        &nbsp;<br /></td>
      <td width="4">&nbsp;</td>
    </tr>
    <tr>
      <td width="165">&nbsp;</td>
      <td width="50">&nbsp;</td>
      <td width="441">&nbsp;</td>
      <td width="529">&nbsp;</td>
      <td width="50">&nbsp;</td>
      <td width="4">&nbsp;</td>
      <td width="4">&nbsp;</td>
    </tr>
  </table>
  <script src="https://d1tdp7z6w94jbb.cloudfront.net/js/jquery-3.3.1.min.js" type="text/javascript"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDe6kgK2e3MtEcZ7OuOR_R4eQaaj2nLN5c&libraries=places"></script>
  <script>
    function initialize() {
      var input = document.getElementById('searchTextField');
      new google.maps.places.Autocomplete(input);
    }
    var geocoder = new google.maps.Geocoder();
    google.maps.event.addDomListener(window, 'load', initialize);
    function fetchAddress() {
      var address = document.getElementById('searchTextField').value;
      geocoder.geocode({ 'address': address }, function (results, status) {
        if (status === 'OK') {
          lat = results[0].geometry.location.lat()
          lng = results[0].geometry.location.lng()
          console.log(lat)
          console.log(lng)
          document.getElementById('Latitude').value = lat
          document.getElementById('Longitude').value = lng
        } else {
          alert("error in fetching address")
        }
      });
    }
    function ConvertFormToJSON(form) {
      var array = jQuery(form).serializeArray();
      var json = {};
      jQuery.each(array, function () {
        json[this.name] = this.value || '';
      });
      var date = "/Date(" + Date.now() + ")/";
      json.CreatedAt = date;
      json.CustomerID = ""
      json.DocID = ""
      delete json["LOCATION"]
      console.log(json);
      console.log(JSON.stringify(json));
      return JSON.stringify(json);
    }
    // instanciate new modal
    /* var modal = new tingle.modal({
      footer: false,
      stickyFooter: false,
      closeMethods: ['overlay', 'button', 'escape'],
      closeLabel: "Close",
      cssClass: ['custom-class-1', 'custom-class-2'],
      onOpen: function () {
        console.log('modal open');
      },
      onClose: function () {
        console.log('modal closed');
      },
      beforeClose: function () {
        // here's goes some logic
        // e.g. save content before closing the modal
        return true; // close the modal
        return false; // nothing happens
      }
    }); */
    $("#email-form").on("submit", function (e) {
      e.preventDefault();
      // However to make it work, we are going to use the cors-anywhere free service to bypass this
      var proxy = 'https://cors-anywhere.herokuapp.com/';
      $.ajax({
        "async": true,
        crossDomain: true,
        "url": "https://audb01c77f3e83a.ap1.hana.ondemand.com/pilot/xsodata/pilot.xsodata/Customer",
        "method": "POST",
        "headers": {
          "Accept": "application/json",
          "Content-Type": "application/json",
          "Authorization": "Basic UElMT1REQlVTUjAxOlBpbG90c2NwQGRidXNyMDE=",
          "cache-control": "no-cache",
          "Access-Control-Allow-Origin": "*"
        },
        success: function (msg) {
          console.log(msg);
          alert("Your enquiry has been recieved and your customer id is " + msg.d.CustomerID)

          /* // set content
          modal.setContent('<h4>Your request has been submitted.</h4><p>Your request has been submitted and your request Token-ID is ' + msg.d.TICKET_ID + ' </p>');
          // open modal
          modal.open(); */
        },
        error: function (err) {
          alert("fail");
        },
        "processData": false,
        "data": ConvertFormToJSON($("#email-form"))
      }).done(function (response) {
        console.log(response);
      });
    });
  </script>
</body>

</html>